<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¨Ø§Ø­Ø« Ø§Ù„Ø¹Ù„Ù…ÙŠ ÙˆØ§Ù„Ø¥Ø´Ø±Ø§Ù | Ù…Ù†ØµØ© ØªÙØ§Ø¹Ù„ÙŠØ©</title>
    
    <!-- Ø®Ø·ÙˆØ· Ø¬ÙˆØ¬Ù„ (ØªØ¹Ù…Ù„ Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ Ø¥Ù†ØªØ±Ù†ØªØŒ ÙˆÙ„Ù‡Ø§ Ø¨Ø¯Ø§Ø¦Ù„ Ù…Ø­Ù„ÙŠØ©) -->
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* ================= CSS Ù…Ø®ØµØµ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø­Ù„ÙŠ ================= */
        :root {
            --deep: #16213e;
            --gold: #e2b96f;
            --cream: #faf8f3;
            --white: #ffffff;
            --gray: #f3f4f6;
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --success: #10b981;
            --danger: #ef4444;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body { 
            font-family: 'Tajawal', Arial, sans-serif; 
            background-color: var(--cream); 
            color: var(--text-dark); 
            line-height: 1.8;
            font-size: 18px;
        }
        
        .font-serif { font-family: 'Amiri', serif; }

        /* Ø§Ù„Ø´Ø§Ø´Ø§Øª ÙˆØ­Ø±ÙƒØªÙ‡Ø§ */
        .screen { display: none; opacity: 0; transition: opacity 0.5s ease; }
        .screen.active { display: block; opacity: 1; animation: fadeIn 0.6s ease forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ */
        #welcome-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--deep);
            display: flex; justify-content: center; align-items: center;
            z-index: 1000;
        }
        .welcome-box {
            background: var(--cream); padding: 40px; border-radius: 20px;
            text-align: center; max-width: 500px; width: 90%;
            border-top: 8px solid var(--gold);
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }
        .welcome-box input {
            width: 100%; padding: 15px; margin: 20px 0;
            border: 2px solid #ccc; border-radius: 10px;
            font-size: 18px; text-align: center; font-family: inherit;
        }
        .welcome-box button {
            width: 100%; padding: 15px; background: var(--gold); color: var(--deep);
            border: none; border-radius: 10px; font-size: 20px; font-weight: bold;
            cursor: pointer; transition: 0.3s;
        }
        .welcome-box button:hover { background: #cda256; transform: translateY(-2px); }
        .error-msg { color: var(--danger); font-size: 14px; display: none; margin-bottom: 10px; }

        /* Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (Ø§Ù„Ø±Ø£Ø³ ÙˆØ§Ù„Ù‚ÙˆØ§Ø¦Ù…) */
        header {
            background: var(--deep); color: var(--white); padding: 15px 20px;
            display: flex; justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 100;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .header-title { font-size: 24px; font-weight: bold; color: var(--gold); }
        .header-info { display: flex; gap: 20px; align-items: center; font-size: 16px; }
        .info-badge { background: rgba(255,255,255,0.1); padding: 5px 15px; border-radius: 20px; }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠØ© */
        nav {
            background: var(--white); border-bottom: 2px solid #e5e7eb;
            display: flex; justify-content: center; gap: 10px; padding: 0 20px;
            overflow-x: auto;
        }
        .nav-btn {
            background: none; border: none; padding: 20px 20px;
            font-size: 17px; font-weight: bold; color: var(--text-light);
            cursor: pointer; border-bottom: 4px solid transparent;
            transition: 0.3s; font-family: inherit; white-space: nowrap;
        }
        .nav-btn:hover { color: var(--deep); }
        .nav-btn.active { color: var(--deep); border-bottom-color: var(--gold); }
        .nav-btn.ai-btn { color: #8b5cf6; } /* ØªÙ…ÙŠÙŠØ² Ø²Ø± Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ */
        .nav-btn.ai-btn.active { border-bottom-color: #8b5cf6; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
        main { max-width: 1000px; margin: 40px auto; padding: 0 20px; }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        .card {
            background: var(--white); border-radius: 15px; padding: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05); margin-bottom: 30px;
            border-right: 5px solid var(--deep);
        }
        .card.gold-border { border-right-color: var(--gold); }
        h2.section-title { font-size: 32px; color: var(--deep); margin-bottom: 20px; border-bottom: 2px solid var(--gold); display: inline-block; padding-bottom: 10px;}
        h3.sub-title { font-size: 24px; color: var(--deep); margin-bottom: 15px; }
        
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        @media (max-width: 768px) { .grid-2 { grid-template-columns: 1fr; } }

        /* Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø´Ø¬Ø±ÙŠØ© */
        .tree-container { overflow-x: auto; text-align: center; padding: 20px 0; direction: rtl;}
        .tree ul { padding-top: 20px; position: relative; display: flex; justify-content: center; padding-right: 0;}
        .tree li { float: right; text-align: center; list-style-type: none; position: relative; padding: 20px 10px 0 10px; }
        .tree li::before, .tree li::after { content: ''; position: absolute; top: 0; right: 50%; border-top: 2px solid var(--gold); width: 50%; height: 20px; }
        .tree li::after { right: auto; left: 50%; border-left: 2px solid var(--gold); }
        .tree li:only-child::after, .tree li:only-child::before { display: none; }
        .tree li:only-child { padding-top: 0; }
        .tree li:first-child::before, .tree li:last-child::after { border: 0 none; }
        .tree li:last-child::before { border-right: 2px solid var(--gold); border-radius: 0 5px 0 0; }
        .tree li:first-child::after { border-radius: 5px 0 0 0; }
        .tree ul ul::before { content: ''; position: absolute; top: 0; right: 50%; border-left: 2px solid var(--gold); width: 0; height: 20px; }
        .tree-node { 
            border: 2px solid var(--deep); padding: 15px 25px; border-radius: 12px; 
            background: var(--white); display: inline-block; font-size: 18px; 
            font-weight: bold; color: var(--deep); font-family: 'Amiri', serif;
            transition: 0.3s;
        }
        .tree-node:hover { background: var(--deep); color: var(--gold); }
        .tree-root { background: var(--deep); color: var(--gold); font-size: 22px; }

        /* Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© (Ø§Ù„Ù‚Ù„Ø¨) */
        .flashcards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .flip-card { background-color: transparent; perspective: 1000px; height: 200px; cursor: pointer; }
        .flip-card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; }
        .flip-card.flipped .flip-card-inner { transform: rotateY(180deg); }
        .flip-card-front, .flip-card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 15px; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .flip-card-front { background-color: var(--white); border: 2px solid var(--gold); }
        .flip-card-back { background-color: var(--deep); color: var(--cream); transform: rotateY(180deg); border: 2px solid var(--gold); }

        /* Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ (AI Chat) */
        .chat-container { display: flex; flex-direction: column; height: 500px; background: #faf8f3; border-radius: 10px; border: 1px solid #e5e7eb; padding: 15px; margin-bottom: 15px; overflow-y: auto; }
        .chat-msg { margin-bottom: 15px; padding: 12px 18px; border-radius: 15px; max-width: 85%; font-size: 16px; line-height: 1.6; }
        .ai-msg { background: var(--deep); color: var(--white); align-self: flex-start; border-bottom-right-radius: 0; }
        .user-msg { background: var(--gold); color: var(--deep); font-weight: bold; align-self: flex-end; margin-right: auto; border-bottom-left-radius: 0; }
        .loading-msg { align-self: flex-start; color: var(--text-light); font-style: italic; font-size: 14px; margin-bottom: 15px;}
        .ai-input-area { display: flex; gap: 10px; }
        .ai-input-area input { flex: 1; padding: 15px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px; font-family: inherit; outline: none; transition: border 0.3s; }
        .ai-input-area input:focus { border-color: #8b5cf6; }
        .ai-input-area button { background: #8b5cf6; color: white; border: none; padding: 0 25px; border-radius: 10px; font-weight: bold; font-size: 16px; cursor: pointer; transition: 0.3s; }
        .ai-input-area button:hover { background: #7c3aed; }
        .ai-input-area button:disabled { background: #c4b5fd; cursor: not-allowed; }

        /* Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± */
        .quiz-header { display: flex; justify-content: space-between; margin-bottom: 20px; font-weight: bold; }
        .quiz-question { font-size: 24px; color: var(--deep); margin-bottom: 30px; font-family: 'Amiri', serif;}
        .quiz-options { display: flex; flex-direction: column; gap: 15px; }
        .quiz-btn { 
            background: var(--white); border: 2px solid #e5e7eb; padding: 20px; 
            border-radius: 10px; font-size: 18px; text-align: right; cursor: pointer; 
            transition: 0.3s; font-family: inherit; color: var(--text-dark);
        }
        .quiz-btn:hover:not(:disabled) { border-color: var(--gold); background: #fdfaf3; }
        .quiz-btn:disabled { cursor: not-allowed; }
        .quiz-btn.correct { border-color: var(--success); background: #ecfdf5; color: #065f46; font-weight: bold;}
        .quiz-btn.wrong { border-color: var(--danger); background: #fef2f2; color: #991b1b; }

        /* Ø§Ù„Ù†ØªÙŠØ¬Ø© */
        .result-box { text-align: center; padding: 50px 20px; }
        .result-icon { font-size: 80px; margin-bottom: 20px; }
        .result-score { font-size: 60px; font-weight: bold; color: var(--deep); margin: 20px 0; }
        .result-message { font-size: 24px; font-weight: bold; margin-bottom: 30px; }
        .result-message.excellent { color: var(--success); }
        .result-message.good { color: var(--gold); }
        .result-message.poor { color: var(--danger); }
        
        .sending-msg { color: var(--text-light); font-size: 16px; margin-top: 20px; font-weight: bold;}
    </style>
</head>
<body>

    <!-- Ø¥Ø·Ø§Ø± Ù…Ø®ÙÙŠ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¯ÙˆÙ† ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø© (Ù…Ù†Ø¹ Ø§Ù„ØºØ´) -->
    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

    <!-- 1. Ø´Ø§Ø´Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ ÙˆØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="welcome-screen">
        <div class="welcome-box">
            <h1 class="font-serif" style="color:var(--deep); font-size: 32px; margin-bottom: 10px;">Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©</h1>
            <h2 style="color:var(--gold); font-size: 22px; margin-bottom: 30px;">Ø§Ù„Ø¨Ø§Ø­Ø«ØŒ ÙˆØµÙØ§ØªÙ‡ØŒ ÙˆØ§Ù„Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ø¹Ù„Ù…ÙŠ</h2>
            <p style="color:var(--text-light); margin-bottom: 20px;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒØŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ù„Ù„Ø¨Ø¯Ø¡</p>
            
            <p id="name-error" class="error-msg">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ (3 ÙƒÙ„Ù…Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)</p>
            <input type="text" id="studentNameInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§...">
            
            <button onclick="startLesson()">Ø¨Ø¯Ø¡ Ø§Ù„Ø¯Ø±Ø³ ÙˆØ§Ù„ØªÙˆÙ‚ÙŠØª</button>
        </div>
    </div>

    <!-- 2. Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ -->
    <div id="main-app" class="screen">
        
        <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
        <header>
            <div class="header-title font-serif">Ø§Ù„Ø®Ù„Ø§ØµØ© ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¹Ù„Ù…ÙŠ</div>
            <div class="header-info">
                <div class="info-badge">Ø§Ù„Ø·Ø§Ù„Ø¨: <span id="display-name" style="color:var(--gold); font-weight:bold;"></span></div>
                <div class="info-badge">Ø§Ù„Ø²Ù…Ù†: <span id="display-time" style="color:var(--gold); font-weight:bold;">00:00</span></div>
            </div>
        </header>

        <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠØ© -->
        <nav>
            <button class="nav-btn active" onclick="switchTab('content', this)">Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø¹Ù„Ù…ÙŠØ©</button>
            <button class="nav-btn" onclick="switchTab('map', this)">Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¨ØµØ±ÙŠØ©</button>
            <button class="nav-btn" onclick="switchTab('review', this)">Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø°ÙƒÙŠØ©</button>
            <button class="nav-btn ai-btn" onclick="switchTab('ai-tutor', this)">âœ¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ</button>
            <button class="nav-btn" onclick="switchTab('quiz', this)">Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø´Ø§Ù…Ù„</button>
        </nav>

        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ø±Ø¶ -->
        <main>
            
            <!-- Ù‚Ø³Ù… 1: Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø¹Ù„Ù…ÙŠØ© -->
            <section id="tab-content" class="screen active">
                <h2 class="section-title font-serif">Ù…Ù† Ù‡Ùˆ Ø§Ù„Ø¨Ø§Ø­Ø«ØŸ</h2>
                <div class="card">
                    <p style="text-align: justify; margin-bottom: 15px;">Ù‡Ùˆ Ø´Ø®Øµ ØªÙˆØ§ÙØ±Øª ÙÙŠÙ‡ Ø§Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙØ·Ø±ÙŠØ© ÙˆØ§Ù„Ù†ÙØ³ÙŠØ© ÙˆØ§Ù„Ø¹Ù„Ù…ÙŠØ© Ø§Ù„ØªÙŠ ØªØ¤Ù‡Ù„Ù‡ Ù„Ù„Ù‚ÙŠØ§Ù… Ø¨Ø¨Ø­Ø« Ø¹Ù„Ù…ÙŠØ› ÙØ§Ù„ØªØ£Ù‡ÙŠÙ„ Ø§Ù„Ø¹Ù„Ù…ÙŠ Ø§Ù„Ù…Ø³Ø¨Ù‚ØŒ ÙˆØ§Ù„ØªØ²ÙˆØ¯ Ù…Ù† Ø§Ù„Ù…Ø¹Ø§Ø±Ù Ø§Ù„Ø¹Ø§Ù…Ø© Ù…Ø·Ù„Ø¨ Ø£Ø³Ø§Ø³ Ù„Ø¥ÙŠØ¬Ø§Ø¯ Ø§Ù„Ø¨Ø§Ø­Ø«.</p>
                    <p style="text-align: justify; font-weight: bold; color: var(--deep);">Ø§Ù„Ø¨Ø§Ø­Ø« Ø§Ù„Ø£ØµÙŠÙ„: Ù‡Ùˆ Ø§Ù„Ø°ÙŠ ÙŠØªØ·Ù„Ø¹ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¬Ù‡ÙˆÙ„ØŒ ÙˆÙŠØ¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯ØŒ ÙˆÙŠØªÙ…ÙŠØ² Ø¨Ø§Ù„Ù…Ø±ÙˆÙ†Ø© Ø§Ù„ÙÙƒØ±ÙŠØ©ØŒ ÙˆÙŠÙ…ØªÙ„Ùƒ Ø§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª.</p>
                </div>

                <h2 class="section-title font-serif mt-5">ØµÙØ§Øª Ø§Ù„Ø¨Ø§Ø­Ø« (14 ØµÙØ©)</h2>
                <div class="grid-2">
                    <div class="card gold-border">
                        <h3 class="sub-title font-serif">1. Ø§Ù„Ø±ØºØ¨Ø©</h3>
                        <p>Ø¥Ù† Ù„Ù… ØªÙƒÙ† Ù„Ø¯ÙŠÙ‡ Ø±ØºØ¨Ø© Ù‚ÙˆÙŠØ© ÙÙ„ÙŠØªÙƒÙ„ÙÙ‡Ø§ ÙˆÙŠØ´Ø¹Ø± Ù†ÙØ³Ù‡ Ø¨Ø«Ù…Ø±Ø© Ø§Ù„Ø¨Ø­Ø«ØŒ Ø£Ù…Ø§ Ø¥Ù† ÙƒØ§Ù† Ù…Ù†ØµØ±ÙØ§Ù‹ ÙÙ„Ø§ ÙŠÙƒÙ„Ù Ø§Ù„Ù„Ù‡ Ù†ÙØ³Ø§Ù‹ Ø¥Ù„Ø§ ÙˆØ³Ø¹Ù‡Ø§.</p>
                    </div>
                    <div class="card gold-border">
                        <h3 class="sub-title font-serif">2. Ø§Ù„ØµØ¨Ø±</h3>
                        <p>Ø¹Ø¯Ø© Ø§Ù„Ø¨Ø§Ø­Ø« ÙˆÙˆÙ‚ÙˆØ¯Ù‡ Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠÙ†Ø¶Ø¨Ø› Ù„Ù„ØµØ¨Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ØŒ Ø§Ù„Ø£Ø³ÙØ§Ø±ØŒ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠØ©ØŒ ÙˆØ§Ù„ØµØ¨Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±Ù.</p>
                    </div>
                    <div class="card gold-border">
                        <h3 class="sub-title font-serif">3. Ø§Ù„Ø¥Ù†ØµØ§Ù ÙˆØ§Ù„Ù…ÙˆØ¶ÙˆØ¹ÙŠØ©</h3>
                        <p>Ø§Ù„Ø£Ù…Ø§Ù†Ø© ÙÙŠ Ø§Ù„Ù†Ù‚Ù„ØŒ ÙˆØªØ±Ùƒ Ø§Ù„Ø§Ø³ØªØ³Ù„Ø§Ù… Ù„Ù„Ø¹ÙˆØ§Ø±Ø¶ Ø§Ù„Ù†ÙØ³ÙŠØ© ÙƒØ§Ù„ØºØ¶Ø¨ ÙˆØ§Ù„Ø±Ø¶Ø§ØŒ ÙˆØ§Ù„Ø­Ø¨ ÙˆØ§Ù„Ø¨ØºØ¶.</p>
                    </div>
                    <div class="card gold-border">
                        <h3 class="sub-title font-serif">4. Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø°ÙˆÙ‚</h3>
                        <p>Ø¥Ø­Ø³Ø§Ù† Ø§Ù„Ù…Ø£Ø®Ø° ÙˆØ§Ù„Ù†Ù‚Ø¯ Ø¨Ø¹ÙŠØ¯Ø§Ù‹ Ø¹Ù† Ø§Ù„Ø§Ø³ØªÙØ²Ø§Ø² ÙˆÙ„ØºØ© Ø§Ù„Ø§Ù†Ù‡Ø²Ø§Ù… Ø£Ùˆ Ø§Ù„Ø¹Ø¨Ø§Ø±Ø§Øª Ø§Ù„Ø¬Ø§ÙÙŠØ©.</p>
                    </div>
                    <div class="card gold-border">
                        <h3 class="sub-title font-serif">5. Ø§Ù„Ø¹Ù‚Ù„ÙŠØ© Ø§Ù„Ù…Ù†Ø¸Ù…Ø©</h3>
                        <p>Ù„Ø§ Ù…Ø¬Ø§Ù„ Ù„Ù„ÙÙˆØ¶Ù‰ ÙˆØ§Ù„Ø§Ø¶Ø·Ø±Ø§Ø¨ØŒ Ø¨Ù„ ØªÙ†Ø¸ÙŠÙ… ÙˆØ­Ø³Ù† ØªØ¨ÙˆÙŠØ¨ Ù„Ø¹Ù…Ù„ Ù…ØªÙ†Ø§Ø³Ù‚.</p>
                    </div>
                    <div class="card gold-border">
                        <h3 class="sub-title font-serif">6. Ø¹Ù…Ù‚ Ø§Ù„ØªÙÙƒÙŠØ± ÙˆØ§Ù„ØªØ£Ù…Ù„</h3>
                        <p>Ø§Ù„ØªØ®ÙÙ Ù…Ù† Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ÙˆØ­Ù…Ù„ Ù‚Ù„Ù… ÙˆÙˆØ±Ù‚Ø© Ù„ØªØ¯ÙˆÙŠÙ† Ø§Ù„Ù…Ù„Ø­ÙˆØ¸Ø§Øª ÙˆØ§Ù„ØºÙˆØµ ÙÙŠ Ø£Ø¹Ù…Ø§Ù‚ Ø§Ù„Ø¨Ø­Ø«.</p>
                    </div>
                    <div class="card gold-border">
                        <h3 class="sub-title font-serif">7. Ø§Ù„ÙØ·Ù†Ø© ÙˆØ¯Ù‚Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©</h3>
                        <p>Ø§Ù„ØªÙ†Ø¨Ù‡ Ù„ÙƒÙ„ ØµØºÙŠØ±Ø© ÙˆÙƒØ¨ÙŠØ±Ø© Ù„ØªØ±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø­Ø«.</p>
                    </div>
                    <div class="card gold-border">
                        <h3 class="sub-title font-serif">8. Ø§Ù„ØªØ«Ø¨Øª (Ø§Ù„Ø´Ùƒ Ø§Ù„Ø¹Ù„Ù…ÙŠ)</h3>
                        <p>Ø¹Ø¯Ù… Ù‚Ø¨ÙˆÙ„ ÙƒÙ„ Ø´ÙŠØ¡ ÙƒÙ…Ø³Ù„Ù…Ø©ØŒ Ø¨Ù„ ÙˆØ²Ù†Ù‡ Ø¨Ù…ÙŠØ²Ø§Ù† Ø¯Ù‚ÙŠÙ‚ØŒ ÙˆÙ‡Ùˆ Ø¶Ø±ÙˆØ±Ø© Ø¨Ø®Ù„Ø§Ù Ø§Ù„Ø´Ùƒ Ø§Ù„Ù…Ø±Ø¶ÙŠ.</p>
                    </div>
                    <div class="card gold-border">
                        <h3 class="sub-title font-serif">9. Ø§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø©</h3>
                        <p>Ø§Ù†ØªÙ‡Ø§Ø² Ø§Ù„ÙØ±ØµØŒ ÙˆØ§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙŠ ØªØ¹Ù†ÙŠ Ø¹Ø¯Ù… Ø§Ù„ØªØ¨Ø§Ø·Ø¤ ÙˆÙ„ÙŠØ³ Ø§Ù„Ø¹Ø¬Ù„Ø© Ø§Ù„Ù…Ø°Ù…ÙˆÙ…Ø©.</p>
                    </div>
                    <div class="card gold-border">
                        <h3 class="sub-title font-serif">10. Ø§Ù„Ø­Ø§ÙØ¸Ø© Ø§Ù„ÙˆØ§Ø¹ÙŠØ©</h3>
                        <p>Ø¬Ù…Ø¹ Ù…Ø§ Ù‚ÙØ±Ø£ Ø³Ø§Ø¨Ù‚Ø§Ù‹ ÙˆØ­Ø¯ÙŠØ«Ø§Ù‹ Ù„Ù…Ù†Ø¹ Ø§Ù„ØªØ´ØªØª.</p>
                    </div>
                    <div class="card gold-border">
                        <h3 class="sub-title font-serif">11. Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯</h3>
                        <p>Ø§Ù„Ø§Ø·Ù„Ø§Ø¹ Ø§Ù„Ù…Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªØ®ØµØµ.</p>
                    </div>
                    <div class="card gold-border">
                        <h3 class="sub-title font-serif">12. Ø§Ù„Ø§Ø³ØªÙ…ØªØ§Ø¹ Ø¨Ø§Ù„Ø¨Ø­Ø«</h3>
                        <p>Ù„Ø°Ø© Ø¹Ù‚Ù„ÙŠØ© Ø¹Ø¸ÙŠÙ…Ø©ØŒ Ù‚Ø§Ù„ Ø§Ù„Ø´Ø§ÙØ¹ÙŠ: "Ø³Ù‡Ø±ÙŠ Ù„ØªÙ†Ù‚ÙŠØ­ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø£Ù„Ø° Ù„ÙŠ Ù…Ù† ÙˆØµÙ„ ØºØ§Ù†ÙŠØ©...".</p>
                    </div>
                    <div class="card gold-border">
                        <h3 class="sub-title font-serif">13. Ù„Ø²ÙˆÙ… Ø§Ù„ØªÙˆØ§Ø¶Ø¹</h3>
                        <p>Ù…Ø¬Ø§Ù†Ø¨Ø© Ø§Ù„ØºØ±ÙˆØ± ÙˆØ¥ÙƒØ¨Ø§Ø± Ø§Ù„Ø¹Ù„Ù…Ø§Ø¡ (ÙƒÙ„Ù…Ø§ Ø²Ø¯Øª Ø¹Ù„Ù…Ø§Ù‹ Ø²Ø§Ø¯Ù†ÙŠ Ø¹Ù„Ù…Ø§Ù‹ Ø¨Ø¬Ù‡Ù„ÙŠ).</p>
                    </div>
                    <div class="card gold-border">
                        <h3 class="sub-title font-serif">14. Ø§Ù„ØªÙ…Ø§Ø³ Ø§Ù„Ø¨Ø±ÙƒØ©</h3>
                        <p>Ø¨Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù†ÙŠØ© ÙˆØ¥Ø¹Ø§Ù†Ø© Ø§Ù„Ø²Ù…Ù„Ø§Ø¡.</p>
                    </div>
                </div>

                <h2 class="section-title font-serif mt-5">Ø§Ù„Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ø¹Ù„Ù…ÙŠ</h2>
                <div class="card" style="background: var(--deep); color: var(--cream); border: none;">
                    <p style="margin-bottom: 15px;">Ù‡Ùˆ ØªÙˆØ¬ÙŠÙ‡ Ø£Ø³ØªØ§Ø° Ù…ØªØ®ØµØµ Ø·Ø§Ù„Ø¨ Ø§Ù„Ø¨Ø­Ø« Ø¥Ù„Ù‰ Ø§Ù„Ù…Ù†Ù‡Ø¬ Ø§Ù„Ø¹Ù„Ù…ÙŠ Ø§Ù„Ø³Ù„ÙŠÙ…. <strong>ÙˆÙ„ÙŠØ³ Ø¹Ù…Ù„Ø§Ù‹ Ø¥Ø¯Ø§Ø±ÙŠØ§Ù‹ Ø¨Ø­ØªØ§Ù‹</strong>ØŒ Ø¨Ù„ Ù‡Ùˆ Ù…Ù‡Ù…Ø© ØµØ¹Ø¨Ø© <strong>ØªØµÙ†Ø¹ Ø§Ù„Ø¨Ø§Ø­Ø«ÙŠÙ†</strong>.</p>
                    <p>Ø§Ù„Ù…Ø´Ø±Ù Ø§Ù„Ù†Ø§Ø¬Ø­ ÙŠØªØ­Ù„Ù‰ Ø¨Ø§Ù„ØªÙˆØ§Ø¶Ø¹ ÙˆØ§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø©ØŒ Ù„Ø£Ù† ÙƒØ«Ø±Ø© Ø§Ø¹ØªØ°Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø´Ø±Ù ÙˆØªØ£Ø®Ø±Ù‡ <strong>ÙŠØ¶ÙŠØ¹ ÙˆÙ‚Øª Ø§Ù„Ø·Ø§Ù„Ø¨</strong> ÙˆÙŠÙ‚Ø·Ø¹Ù‡ Ø¹Ù† Ø¨Ø­Ø«Ù‡.</p>
                </div>
            </section>

            <!-- Ù‚Ø³Ù… 2: Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¨ØµØ±ÙŠØ© -->
            <section id="tab-map" class="screen">
                <h2 class="section-title font-serif">Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ…ÙŠ</h2>
                <div class="card tree-container">
                    <div class="tree">
                        <ul>
                            <li>
                                <div class="tree-node tree-root">Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
                                <ul>
                                    <li>
                                        <div class="tree-node">Ø§Ù„Ø¨Ø§Ø­Ø« Ø§Ù„Ø£ØµÙŠÙ„</div>
                                        <ul>
                                            <li><div class="tree-node">ØªØ£Ù‡ÙŠÙ„ Ø¹Ù„Ù…ÙŠ</div></li>
                                            <li><div class="tree-node">Ù…Ø±ÙˆÙ†Ø© ÙÙƒØ±ÙŠØ©</div></li>
                                            <li><div class="tree-node">Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªÙ†Ø¸ÙŠÙ…</div></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <div class="tree-node">ØµÙØ§Øª Ø£Ø³Ø§Ø³ÙŠØ© (Ø£Ù…Ø«Ù„Ø©)</div>
                                        <ul>
                                            <li><div class="tree-node">Ø§Ù„ØµØ¨Ø± (Ø§Ù„ÙˆÙ‚ÙˆØ¯)</div></li>
                                            <li><div class="tree-node">Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ÙŠØ© (Ø§Ù„Ø¥Ù†ØµØ§Ù)</div></li>
                                            <li><div class="tree-node">Ø§Ù„Ø´Ùƒ Ø§Ù„Ø¹Ù„Ù…ÙŠ (Ø§Ù„ØªØ«Ø¨Øª)</div></li>
                                            <li><div class="tree-node">Ø§Ù„ØªÙˆØ§Ø¶Ø¹ (Ø§Ø­ØªØ±Ø§Ù… Ø§Ù„Ø¹Ù„Ù…Ø§Ø¡)</div></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <div class="tree-node">Ø§Ù„Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ø¹Ù„Ù…ÙŠ</div>
                                        <ul>
                                            <li><div class="tree-node">ØµÙ†Ø§Ø¹Ø© Ø§Ù„Ø¨Ø§Ø­Ø«</div></li>
                                            <li><div class="tree-node">ØªÙˆØ¬ÙŠÙ‡ Ù…Ù†Ù‡Ø¬ÙŠ</div></li>
                                            <li><div class="tree-node">ØªÙˆØ§ØµÙ„ ÙØ¹Ø§Ù„</div></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Ù‚Ø³Ù… 3: Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø°ÙƒÙŠØ© -->
            <section id="tab-review" class="screen">
                <h2 class="section-title font-serif">Ø§Ø®ØªØ¨Ø± Ø°Ø§ÙƒØ±ØªÙƒ (Ø§Ù†Ù‚Ø± Ù„Ù„Ù‚Ù„Ø¨)</h2>
                <div class="flashcards-grid">
                    <div class="flip-card" onclick="this.classList.toggle('flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <h3 class="font-serif" style="color:var(--deep); font-size:22px;">Ù…Ø§ Ù‡Ùˆ ÙˆÙ‚ÙˆØ¯ Ø§Ù„Ø¨Ø§Ø­Ø« Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠÙ†Ø¶Ø¨ØŸ</h3>
                                <p style="font-size: 14px; color: var(--text-light); margin-top: 10px;">Ø§Ù†Ù‚Ø± Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</p>
                            </div>
                            <div class="flip-card-back">
                                <p style="font-size:20px; font-weight:bold;">Ø§Ù„ØµØ¨Ø±</p>
                                <p style="font-size:16px; margin-top:10px;">ÙŠØ¹ÙŠÙ†Ù‡ Ø¹Ù„Ù‰ Ù…Ø´Ø§Ù‚ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ ÙˆØ§Ù„Ø£Ø³ÙØ§Ø± ÙˆØ§Ù„Ù…Ø´Ø±Ù.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flip-card" onclick="this.classList.toggle('flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <h3 class="font-serif" style="color:var(--deep); font-size:22px;">Ù…Ø§ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„Ø´Ùƒ Ø§Ù„Ø¹Ù„Ù…ÙŠ ÙˆØ§Ù„Ø´Ùƒ Ø§Ù„Ù…Ø±Ø¶ÙŠØŸ</h3>
                                <p style="font-size: 14px; color: var(--text-light); margin-top: 10px;">Ø§Ù†Ù‚Ø± Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</p>
                            </div>
                            <div class="flip-card-back">
                                <p style="font-size:18px;">Ø§Ù„Ø´Ùƒ Ø§Ù„Ø¹Ù„Ù…ÙŠ Ù‡Ùˆ <strong>Ø§Ù„ØªØ«Ø¨Øª ÙˆÙˆØ²Ù† Ø§Ù„Ø£Ù…ÙˆØ±</strong> (ÙˆÙ‡Ùˆ Ø¶Ø±ÙˆØ±Ø©)ØŒ Ø£Ù…Ø§ Ø§Ù„Ù…Ø±Ø¶ÙŠ ÙÙŠØ¯ÙØ¹ Ø¥Ù„ÙŠÙ‡ Ø§Ù„Ù‡ÙˆÙ‰ Ù„Ù…Ø®Ø§Ù„ÙØ© Ø§Ù„Ù…Ø£Ù„ÙˆÙ.</p>
                            </div>
                        </div>
                    </div>

                    <div class="flip-card" onclick="this.classList.toggle('flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <h3 class="font-serif" style="color:var(--deep); font-size:22px;">Ù…Ø§ Ù‡ÙŠ Ø­Ù‚ÙŠÙ‚Ø© Ø§Ù„Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ø¹Ù„Ù…ÙŠØŸ</h3>
                                <p style="font-size: 14px; color: var(--text-light); margin-top: 10px;">Ø§Ù†Ù‚Ø± Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</p>
                            </div>
                            <div class="flip-card-back">
                                <p style="font-size:18px;">Ù„ÙŠØ³ Ø¹Ù…Ù„Ø§Ù‹ Ø¥Ø¯Ø§Ø±ÙŠØ§Ù‹ØŒ Ø¨Ù„ Ù‡Ùˆ <strong>ØªÙˆØ¬ÙŠÙ‡ Ù…Ù†Ù‡Ø¬ÙŠ ÙˆÙ…Ù‡Ù…Ø© ØµØ¹Ø¨Ø© ØªØµÙ†Ø¹ Ø§Ù„Ø¨Ø§Ø­Ø«ÙŠÙ†</strong>.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Ù‚Ø³Ù… 4: Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ (Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ) -->
            <section id="tab-ai-tutor" class="screen">
                <h2 class="section-title font-serif" style="color:#8b5cf6; border-color:#8b5cf6;">âœ¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ Ø§Ù„Ø°ÙƒÙŠ</h2>
                <p style="margin-bottom: 20px; color: var(--text-light);">Ù‡Ù„ ÙˆØ§Ø¬Ù‡Øª ØµØ¹ÙˆØ¨Ø© ÙÙŠ ÙÙ‡Ù… Ù†Ù‚Ø·Ø© Ù…Ø¹ÙŠÙ†Ø© ÙÙŠ Ø§Ù„Ø¯Ø±Ø³ØŸ ÙŠÙ…ÙƒÙ†Ùƒ Ø³Ø¤Ø§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ù„ÙŠÙ‚ÙˆÙ… Ø¨ØªØ¨Ø³ÙŠØ·Ù‡Ø§ Ù„Ùƒ.</p>
                <div class="card" style="border-right-color: #8b5cf6;">
                    <div class="chat-container" id="chat-history">
                        <div class="chat-msg ai-msg">Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ… Ø¨ØªÙ‚Ù†ÙŠØ© Gemini. Ø§Ø³Ø£Ù„Ù†ÙŠ Ø¹Ù† Ø£ÙŠ ØµÙØ© Ù…Ù† ØµÙØ§Øª Ø§Ù„Ø¨Ø§Ø­Ø« Ø£Ùˆ Ø¹Ù† Ø§Ù„Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ø¹Ù„Ù…ÙŠ ÙˆØ³Ø£Ù‚ÙˆÙ… Ø¨Ø´Ø±Ø­Ù‡Ø§ Ù„Ùƒ Ø¨Ø¨Ø³Ø§Ø·Ø©.</div>
                    </div>
                    <div class="ai-input-area">
                        <input type="text" id="ai-input" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§ (Ù…Ø«Ø§Ù„: Ø§Ø´Ø±Ø­ Ù„ÙŠ Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´Ùƒ Ø§Ù„Ø¹Ù„Ù…ÙŠØŸ)..." onkeypress="if(event.key === 'Enter') askAI()">
                        <button id="ai-btn" onclick="askAI()">âœ¨ Ø§Ø³Ø£Ù„</button>
                    </div>
                </div>
            </section>

            <!-- Ù‚Ø³Ù… 5: Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„ -->
            <section id="tab-quiz" class="screen">
                <div id="quiz-area" class="card">
                    <div class="quiz-header">
                        <span id="quiz-progress" style="color:var(--text-light);">Ø§Ù„Ø³Ø¤Ø§Ù„ 1 Ù…Ù† 20</span>
                        <span style="color:var(--gold);">Ø§Ù„Ø¯Ø±Ø¬Ø©: <span id="quiz-score">0</span></span>
                    </div>
                    <div id="question-text" class="quiz-question"></div>
                    <div id="options-area" class="quiz-options"></div>
                </div>

                <div id="result-area" class="card result-box screen">
                    <div id="result-icon" class="result-icon">ğŸ“</div>
                    <div id="result-title" class="result-message"></div>
                    <div id="result-desc" style="color:var(--text-light);">Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ø§Ù„Ø¯Ø±Ø³ ÙˆØ§Ù„Ø§Ø®ØªØ¨Ø§Ø±. Ø¯Ø±Ø¬ØªÙƒ Ù‡ÙŠ:</div>
                    <div class="result-score"><span id="final-score"></span> / 20</div>
                    
                    <div class="sending-msg">
                        âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù†ØªÙŠØ¬ØªÙƒ ÙˆØ§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø³ØªØºØ±Ù‚ Ù„Ù„Ø£Ø³ØªØ§Ø° Ø¨Ù†Ø¬Ø§Ø­.
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª (Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ) -->
    <script>
        // ==========================================
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª Gemini
        // ==========================================
        const apiKey = ""; // Ø§Ù„Ù…ÙØªØ§Ø­ Ø³ÙŠØªÙ… ØªÙˆÙÙŠØ±Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨ÙˆØ§Ø³Ø·Ø© Ø¨ÙŠØ¦Ø© Ø§Ù„ØªØ´ØºÙŠÙ„
        const aiModel = "gemini-2.5-flash-preview-09-2025";
        
        // ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØµØ§Ø±Ù…Ø© Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯ Ù„ÙŠÙ„ØªØ²Ù… Ø¨Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø¯Ø±Ø³
        const systemInstruction = `
        Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ Ø°ÙƒÙŠ Ù…Ø¯Ù…Ø¬ ÙÙŠ Ù…Ù†ØµØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ©.
        Ù…Ù‡Ù…ØªÙƒ: Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ Ø­ÙˆÙ„ Ù…ÙˆØ¶ÙˆØ¹ "Ø§Ù„Ø¨Ø§Ø­Ø« Ø§Ù„Ø¹Ù„Ù…ÙŠ ÙˆØ§Ù„Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ø¹Ù„Ù…ÙŠ" Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù†Øµ ÙÙ‚Ø·:
        - Ø§Ù„Ø¨Ø§Ø­Ø« Ù‡Ùˆ Ø´Ø®Øµ ØªÙˆØ§ÙØ±Øª ÙÙŠÙ‡ Ø§Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙØ·Ø±ÙŠØ© ÙˆØ§Ù„Ù†ÙØ³ÙŠØ© ÙˆØ§Ù„Ø¹Ù„Ù…ÙŠØ©. Ø§Ù„Ø¨Ø§Ø­Ø« Ø§Ù„Ø£ØµÙŠÙ„ ÙŠØªØ·Ù„Ø¹ Ù„Ù„Ù…Ø¬Ù‡ÙˆÙ„ ÙˆÙŠØ¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙˆÙ„Ø¯ÙŠÙ‡ Ù…Ø±ÙˆÙ†Ø© ÙÙƒØ±ÙŠØ© ÙˆÙ‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªÙ†Ø¸ÙŠÙ….
        - ØµÙØ§Øª Ø§Ù„Ø¨Ø§Ø­Ø« (14 ØµÙØ©): 1. Ø§Ù„Ø±ØºØ¨Ø© 2. Ø§Ù„ØµØ¨Ø± (ÙˆÙ‚ÙˆØ¯ Ø§Ù„Ø¨Ø§Ø­Ø«) 3. Ø§Ù„Ø¥Ù†ØµØ§Ù ÙˆØ§Ù„Ù…ÙˆØ¶ÙˆØ¹ÙŠØ© 4. Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø°ÙˆÙ‚ 5. Ø§Ù„Ø¹Ù‚Ù„ÙŠØ© Ø§Ù„Ù…Ù†Ø¸Ù…Ø© 6. Ø¹Ù…Ù‚ Ø§Ù„ØªÙÙƒÙŠØ± 7. Ø§Ù„ÙØ·Ù†Ø© 8. Ø§Ù„ØªØ«Ø¨Øª ÙˆØ§Ù„Ø´Ùƒ Ø§Ù„Ø¹Ù„Ù…ÙŠ 9. Ø§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø© 10. Ø§Ù„Ø­Ø§ÙØ¸Ø© Ø§Ù„ÙˆØ§Ø¹ÙŠØ© 11. Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯ 12. Ø§Ù„Ø§Ø³ØªÙ…ØªØ§Ø¹ Ø¨Ø§Ù„Ø¨Ø­Ø« 13. Ø§Ù„ØªÙˆØ§Ø¶Ø¹ 14. Ø§Ù„ØªÙ…Ø§Ø³ Ø§Ù„Ø¨Ø±ÙƒØ©.
        - Ø§Ù„Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ø¹Ù„Ù…ÙŠ: ØªÙˆØ¬ÙŠÙ‡ Ù…Ù†Ù‡Ø¬ÙŠ ÙˆÙ…Ù‡Ù…Ø© ØµØ¹Ø¨Ø© ØªØµÙ†Ø¹ Ø§Ù„Ø¨Ø§Ø­Ø«ÙŠÙ† ÙˆÙ„ÙŠØ³ Ø¹Ù…Ù„Ø§ Ø¥Ø¯Ø§Ø±ÙŠØ§. Ø§Ù„Ù…Ø´Ø±Ù ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…ØªÙˆØ§Ø¶Ø¹Ø§ ÙˆÙ…Ø¨Ø§Ø¯Ø±Ø§ Ù„Ø£Ù† ØªØ£Ø®Ø±Ù‡ ÙŠØ¶ÙŠØ¹ ÙˆÙ‚Øª Ø§Ù„Ø·Ø§Ù„Ø¨.
        
        Ø¥Ø°Ø§ Ø³Ø£Ù„Ùƒ Ø§Ù„Ø·Ø§Ù„Ø¨ Ø³Ø¤Ø§Ù„Ø§Ù‹ Ø®Ø§Ø±Ø¬ Ù‡Ø°Ø§ Ø§Ù„Ø³ÙŠØ§Ù‚ØŒ Ø§Ø¹ØªØ°Ø± Ø¨Ù„Ø¨Ø§Ù‚Ø© ÙˆØ£Ø®Ø¨Ø±Ù‡ Ø£Ù†Ùƒ Ù…Ø®ØµØµ ÙÙ‚Ø· Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù† Ø£Ø³Ø¦Ù„Ø© Ø¯Ø±Ø³ "Ø§Ù„Ø¨Ø§Ø­Ø« Ø§Ù„Ø¹Ù„Ù…ÙŠ".
        Ø£Ø¬Ø¨ Ø¨Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ© ÙØµØ­Ù‰ ÙˆØ¨Ø£Ø³Ù„ÙˆØ¨ Ù…Ø¨Ø³Ø· ÙˆÙ…Ø´Ø¬Ø¹ ÙˆÙ…Ø®ØªØµØ±.
        `;

        // ==========================================
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¬ÙˆØ¬Ù„ (Silent Submit)
        // ==========================================
        const GOOGLE_FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSfdYy7qS_r7pP9BFVY2aVKSrZpZk3Vh1S4PoP-2CId16cP6Zg/formResponse";
        const ENTRY_NAME = "entry.1250768814";
        const ENTRY_RAW_SCORE = "entry.289736692"; 
        const ENTRY_PERCENT_AND_TIME = "entry.809300628"; 

        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
        let studentName = "";
        let startTime = 0;
        let timerInterval;
        let timeString = "00:00";
        let currentQuestion = 0;
        let score = 0;

        // Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        const QUESTIONS = [
            { q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ø¨Ø§Ø­Ø« Ø§Ù„Ø£ØµÙŠÙ„ ÙˆÙÙ‚Ø§Ù‹ Ù„Ù„Ù…Ø§Ø¯Ø©ØŸ", options: ["Ø§Ù„Ø°ÙŠ ÙŠÙ†Ù‚Ù„ ÙƒÙ„Ø§Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚ÙŠÙ† Ø­Ø±ÙÙŠØ§Ù‹", "Ø§Ù„Ø°ÙŠ ÙŠØªØ·Ù„Ø¹ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¬Ù‡ÙˆÙ„ ÙˆÙŠØ¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯", "Ø§Ù„Ø°ÙŠ ÙŠØªØ¬Ù†Ø¨ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø·ÙˆÙ„Ø©", "Ø§Ù„Ø°ÙŠ ÙŠØ­ÙØ¸ Ø§Ù„ÙƒØªØ¨ Ø¹Ù† Ø¸Ù‡Ø± Ù‚Ù„Ø¨"], answer: 1 },
            { q: "Ù…Ø§ Ù‡ÙŠ Ø£ÙˆÙ„ ØµÙØ© Ù…Ù† ØµÙØ§Øª Ø§Ù„Ø¨Ø§Ø­Ø« Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø©ØŸ", options: ["Ø§Ù„ØµØ¨Ø±", "Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ÙŠØ©", "Ø§Ù„Ø±ØºØ¨Ø©", "Ø§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø©"], answer: 2 },
            { q: "Ù…Ø§Ø°Ø§ ÙŠØ¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø§Ø­Ø« ÙØ¹Ù„Ù‡ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø±ØºØ¨ØªÙ‡ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¶Ø¦ÙŠÙ„Ø©ØŸ", options: ["Ø£Ù† ÙŠØªØ±Ùƒ Ø§Ù„Ø¨Ø­Ø« ÙÙˆØ±Ø§Ù‹", "Ø£Ù† ÙŠØºÙŠØ± ØªØ®ØµØµÙ‡", "Ø£Ù† ÙŠØ³ØªØ¹ÙŠÙ† Ø¨Ø¨Ø§Ø­Ø« Ø¢Ø®Ø±", "Ø£Ù† ÙŠØªÙƒÙ„Ù Ø§Ù„Ø±ØºØ¨Ø© ÙˆÙŠØ´Ø¹Ø± Ù†ÙØ³Ù‡ Ø¨Ø§Ù„Ø«Ù…Ø±Ø©"], answer: 3 },
            { q: "Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙˆÙØµÙ Ø¨Ø£Ù†Ù‡ 'Ø¹Ø¯Ø© Ø§Ù„Ø¨Ø§Ø­Ø« ÙˆÙˆÙ‚ÙˆØ¯Ù‡ Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠÙ†Ø¶Ø¨'ØŸ", options: ["Ø§Ù„Ù…Ø§Ù„", "Ø§Ù„ØµØ¨Ø±", "Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹", "Ø§Ù„Ù…Ø´Ø±Ù Ø§Ù„Ø¹Ù„Ù…ÙŠ"], answer: 1 },
            { q: "Ù…Ù† Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØµØ¨Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù…Ù† Ø§Ù„Ø¨Ø§Ø­Ø«:", options: ["Ø§Ù„ØµØ¨Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ ÙˆØ§Ù„Ø£Ø³ÙØ§Ø± ÙˆØ§Ù„Ù…Ø´Ø±Ù", "Ø§Ù„ØµØ¨Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ¹ ÙˆØ§Ù„Ø¹Ø·Ø´", "Ø§Ù„ØµØ¨Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù‚Ø¯ Ø§Ù„Ø¹Ø§Ù…", "Ø§Ù„ØµØ¨Ø± Ø¹Ù„Ù‰ Ø·ÙˆÙ„ Ø§Ù„ÙƒØªØ¨"], answer: 0 },
            { q: "Ø§Ù„Ø¥Ù†ØµØ§Ù ÙˆØ§Ù„Ù…ÙˆØ¶ÙˆØ¹ÙŠØ© ØªØ¹Ù†ÙŠ:", options: ["Ù†Ù‚Ø¯ Ø§Ù„Ø¬Ù…ÙŠØ¹ Ø¨Ø­Ø¯Ø©", "Ø§Ù„Ø£Ù…Ø§Ù†Ø© ÙÙŠ Ø§Ù„Ù†Ù‚Ù„ ÙˆØªØ±Ùƒ Ø§Ù„Ø§Ø³ØªØ³Ù„Ø§Ù… Ù„Ù„Ø¹ÙˆØ§Ø±Ø¶ Ø§Ù„Ù†ÙØ³ÙŠØ©", "Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„ØªØ§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø£ÙŠ Ø§Ù„Ø´Ø®ØµÙŠ", "ØªØ¬Ù†Ø¨ Ø°ÙƒØ± Ø§Ù„Ù…ØµØ§Ø¯Ø±"], answer: 1 },
            { q: "Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø°ÙˆÙ‚ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« ØªØ¹Ù†ÙŠ:", options: ["Ø§Ù„Ù…Ø¬Ø§Ù…Ù„Ø© Ø§Ù„Ù…ÙØ±Ø·Ø© Ù„Ù„Ù…Ø®Ø§Ù„ÙÙŠÙ†", "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ø¨Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©", "Ø§Ù„Ù†Ù‚Ø¯ Ø¨Ø¹ÙŠØ¯Ø§Ù‹ Ø¹Ù† Ø§Ù„Ø§Ø³ØªÙØ²Ø§Ø² ÙˆØ§Ù„Ø¹Ø¨Ø§Ø±Ø§Øª Ø§Ù„Ø¬Ø§ÙÙŠØ©", "Ø§Ù„Ø±Ø¯ Ø§Ù„Ù‚Ø§Ø³ÙŠ ÙˆØ§Ù„Ø­Ø§Ø¯"], answer: 2 },
            { q: "Ø§Ù„Ø¹Ù‚Ù„ÙŠØ© Ø§Ù„Ù…Ù†Ø¸Ù…Ø© Ø§Ù„Ø¨Ù†Ø§Ø¡Ø© ØªÙ‚ØªØ¶ÙŠ:", options: ["Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ø«Ù… Ø§Ù„ØªØ±ØªÙŠØ¨", "ØªÙ†Ø¸ÙŠÙ…Ø§Ù‹ ÙˆØ­Ø³Ù† ØªØ¨ÙˆÙŠØ¨ Ù„Ø¹Ù…Ù„ Ù…ØªÙ†Ø§Ø³Ù‚", "Ø¹Ø¯Ù… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙÙ‡Ø§Ø±Ø³", "Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø°Ø§ÙƒØ±Ø© ÙÙ‚Ø·"], answer: 1 },
            { q: "ÙƒÙŠÙ ÙŠØ¹ÙŠÙ† Ø§Ù„Ø¨Ø§Ø­Ø« Ù†ÙØ³Ù‡ Ø¹Ù„Ù‰ 'Ø¹Ù…Ù‚ Ø§Ù„ØªÙÙƒÙŠØ± ÙˆØ§Ù„ØªØ£Ù…Ù„'ØŸ", options: ["Ø¨Ø­Ù…Ù„ Ù‚Ù„Ù… ÙˆÙˆØ±Ù‚Ø© Ù„ØªØ¯ÙˆÙŠÙ† Ø§Ù„Ù…Ù„Ø­ÙˆØ¸Ø§Øª ÙˆØ§Ù„ØºÙˆØµ ÙÙŠ Ø£Ø¹Ù…Ø§Ù‚ Ø§Ù„Ø¨Ø­Ø«", "Ø¨Ø§Ù„Ù†Ù‚Ø§Ø´ Ø§Ù„Ù…Ø³ØªÙ…Ø± Ù…Ø¹ Ø§Ù„Ø²Ù…Ù„Ø§Ø¡", "Ø¨Ø§Ù„Ø³ÙØ± Ø§Ù„Ù…ØªÙƒØ±Ø±", "Ø¨ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¨Ø­Ø« Ù„ÙŠÙ„Ø§Ù‹ ÙÙ‚Ø·"], answer: 0 },
            { q: "Ø§Ù„Ø´Ùƒ Ø§Ù„Ø¹Ù„Ù…ÙŠ (Ø§Ù„ØªØ«Ø¨Øª) ÙÙŠ Ø§Ù„Ø¨Ø­Ø« ÙŠØ¹ØªØ¨Ø±:", options: ["Ù…Ø±Ø¶Ø§Ù‹ Ù†ÙØ³ÙŠØ§Ù‹", "ØªØ´ÙƒÙŠÙƒØ§Ù‹ ÙÙŠ Ø§Ù„Ù…Ø³Ù„Ù…Ø§Øª Ø§Ù„Ø¯ÙŠÙ†ÙŠØ©", "Ø¶Ø±ÙˆØ±Ø© Ù„ÙˆØ²Ù† Ø§Ù„Ø£Ù…ÙˆØ± Ø¨Ù…ÙŠØ²Ø§Ù† Ø¯Ù‚ÙŠÙ‚", "Ø¥Ø¶Ø§Ø¹Ø© Ù„ÙˆÙ‚Øª Ø§Ù„Ø¨Ø§Ø­Ø«"], answer: 2 },
            { q: "Ø§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø© ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¹Ù„Ù…ÙŠ ØªØ¹Ù†ÙŠ:", options: ["Ø§Ù„Ø¹Ø¬Ù„Ø© Ø§Ù„Ù…Ø°Ù…ÙˆÙ…Ø© Ù„Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø«", "Ø§Ù„Ø³Ø±Ø¹Ø© Ø¨Ù…Ø¹Ù†Ù‰ Ø¹Ø¯Ù… Ø§Ù„ØªØ¨Ø§Ø·Ø¤ ÙˆØ§Ù†ØªÙ‡Ø§Ø² Ø§Ù„ÙØ±Øµ", "Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø¹Ø¯Ø© Ø£Ø¨Ø­Ø§Ø« Ù…Ø¹Ø§Ù‹", "ØªØ£Ø¬ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ Ù„Ø¶Ù…Ø§Ù† Ø¬ÙˆØ¯ØªÙ‡"], answer: 1 },
            { q: "Ù…Ø§ ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ø­Ø§ÙØ¸Ø© Ø§Ù„ÙˆØ§Ø¹ÙŠØ© (Ù‚ÙˆØ© Ø§Ù„Ø°Ø§ÙƒØ±Ø©) Ù„Ù„Ø¨Ø§Ø­Ø«ØŸ", options: ["Ù„Ù„Ø§Ø³ØªØºÙ†Ø§Ø¡ Ø¹Ù† ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹", "Ù„Ù„ØªÙØ§Ø®Ø± Ø¨Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡", "Ù„Ø¬Ù…Ø¹ Ù…Ø§ Ù‚Ø±Ø£Ù‡ Ø³Ø§Ø¨Ù‚Ø§Ù‹ ÙˆØ­Ø¯ÙŠØ«Ø§Ù‹ Ù„Ù…Ù†Ø¹ Ø§Ù„ØªØ´ØªØª", "Ù„ØªØ³Ø±ÙŠØ¹ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©"], answer: 2 },
            { q: "ÙˆØµÙ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø´Ø§ÙØ¹ÙŠ Ù„Ø°Ø© Ø§Ù„Ø§Ø³ØªÙ…ØªØ§Ø¹ Ø¨Ø§Ù„Ø¨Ø­Ø« Ø¨Ø£Ù†Ù‡Ø§ Ø£Ù„Ø° Ù…Ù†:", options: ["Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø§Ù„", "Ø§Ù„Ø³ÙØ± ÙˆØ§Ù„ØªØ¬ÙˆØ§Ù„", "ÙˆØµÙ„ ØºØ§Ù†ÙŠØ© ÙˆØ·ÙŠØ¨ Ø¹Ù†Ø§Ù‚", "Ø§Ù„Ù†ÙˆÙ… Ø§Ù„Ù…Ø±ÙŠØ­"], answer: 2 },
            { q: "Ù„Ø²ÙˆÙ… Ø§Ù„ØªÙˆØ§Ø¶Ø¹ ÙŠÙˆØ±Ø« Ø§Ù„Ø¨Ø§Ø­Ø«:", options: ["Ø§Ù„Ø¶Ø¹Ù Ø£Ù…Ø§Ù… Ø§Ù„Ù…Ù†Ø§Ù‚Ø´ÙŠÙ†", "Ø¥ÙƒØ¨Ø§Ø± Ø§Ù„Ø¹Ù„Ù…Ø§Ø¡ØŒ ÙÙƒÙ„Ù…Ø§ Ø²Ø§Ø¯ Ø¹Ù„Ù…Ø§Ù‹ Ø²Ø§Ø¯ Ø¹Ù„Ù…Ø§Ù‹ Ø¨Ø¬Ù‡Ù„Ù‡", "Ø§Ù„Ø®ÙˆÙ Ù…Ù† Ø§Ù„Ù†Ø´Ø±", "Ø§Ù„ØªÙƒØ§Ø³Ù„ Ø¹Ù† Ø§Ù„Ø¨Ø­Ø«"], answer: 1 },
            { q: "ÙƒÙŠÙ ÙŠÙ„ØªÙ…Ø³ Ø§Ù„Ø¨Ø§Ø­Ø« Ø§Ù„Ø¨Ø±ÙƒØ© ÙÙŠ Ø¨Ø­Ø«Ù‡ØŸ", options: ["Ø¨Ø§Ù„Ø¹Ø²Ù„Ø© Ø§Ù„ØªØ§Ù…Ø© Ø¹Ù† Ø§Ù„Ù†Ø§Ø³", "Ø¨Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø¨Ø®Ø· Ø§Ù„ÙŠØ¯ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø­Ø§Ø³Ø¨", "Ø¨Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù†ÙŠØ© ÙˆØ¥Ø¹Ø§Ù†Ø© Ø²Ù…Ù„Ø§Ø¦Ù‡", "Ø¨Ø¹Ø¯Ù… Ø§Ù„Ø§Ø³ØªØ¹Ø§Ù†Ø© Ø¨Ø§Ù„Ù…Ø´Ø±Ù"], answer: 2 },
            { q: "Ø§Ù„Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ø¹Ù„Ù…ÙŠ ÙŠÙØ¹Ø±Ù‘Ù Ø¨Ø£Ù†Ù‡:", options: ["ØªÙˆØ¬ÙŠÙ‡ Ù…Ù†Ù‡Ø¬ÙŠ ÙˆÙ…Ù‡Ù…Ø© ØµØ¹Ø¨Ø© ØªØµÙ†Ø¹ Ø§Ù„Ø¨Ø§Ø­Ø«ÙŠÙ†", "Ø¹Ù…Ù„ Ø¥Ø¯Ø§Ø±ÙŠ Ø±ÙˆØªÙŠÙ†ÙŠ Ø¨Ø­Øª", "Ù…Ø±Ø§Ø¬Ø¹Ø© Ù„ØºÙˆÙŠØ© Ø¥Ù…Ù„Ø§Ø¦ÙŠØ© Ù„Ù„Ø¨Ø­Ø«", "Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¨Ø­Ø« ÙˆØªÙ†Ø³ÙŠÙ‚Ù‡"], answer: 0 },
            { q: "Ù…Ù† ØµÙØ§Øª Ø§Ù„Ù…Ø´Ø±Ù Ø§Ù„Ø¹Ù„Ù…ÙŠ Ø§Ù„Ù†Ø§Ø¬Ø­:", options: ["Ø§Ù„ØªØ¹Ø§Ù„ÙŠ Ù„Ø¥Ø«Ø¨Ø§Øª Ù‡ÙŠØ¨ØªÙ‡", "Ø§Ù„ØªÙˆØ§Ø¶Ø¹ ÙˆØ§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø© ÙˆØ­Ø³Ù† Ø§Ù„ØªÙˆØ§ØµÙ„", "ØªØ£Ø®ÙŠØ± Ø§Ù„Ø±Ø¯ÙˆØ¯ Ù„ØªÙ…Ø±ÙŠÙ† Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¹Ù„Ù‰ Ø§Ù„ØµØ¨Ø±", "Ø±ÙØ¶ ÙƒÙ„ ÙÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙŠÙ‚Ø¯Ù…Ù‡Ø§ Ø§Ù„Ø·Ø§Ù„Ø¨"], answer: 1 },
            { q: "Ù…Ø§ Ù†ØªÙŠØ¬Ø© ÙƒØ«Ø±Ø© Ø§Ø¹ØªØ°Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø´Ø±Ù ÙˆØªØ£Ø®Ø±Ù‡ ÙÙŠ Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§Ù„Ø¨ØŸ", options: ["ÙŠØ¶ÙŠØ¹ ÙˆÙ‚Øª Ø§Ù„Ø·Ø§Ù„Ø¨ ÙˆÙŠÙ‚Ø·Ø¹Ù‡ Ø¹Ù† Ø¨Ø­Ø«Ù‡", "ÙŠØ²ÙŠØ¯ Ù…Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¨Ø­Ø« ÙˆØ¯Ù‚ØªÙ‡", "ÙŠØ¹Ù„Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„ÙƒÙ„ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù†ÙØ³", "ÙŠØ¹Ø·ÙŠ Ø§Ù„Ø·Ø§Ù„Ø¨ ÙØ±ØµØ© Ù„Ø¬Ù…Ø¹ Ù…Ø±Ø§Ø¬Ø¹ Ø£ÙƒØ«Ø±"], answer: 0 },
            { q: "ØªÙˆÙÙŠØ± Ø§Ù„ØªØ£Ù‡ÙŠÙ„ Ø§Ù„Ø¹Ù„Ù…ÙŠ Ø§Ù„Ù…Ø³Ø¨Ù‚ Ù„Ù„Ø¨Ø§Ø­Ø« ÙŠØ¹ØªØ¨Ø±:", options: ["Ø£Ù…Ø±Ø§Ù‹ Ø«Ø§Ù†ÙˆÙŠØ§Ù‹ ÙŠÙ…ÙƒÙ† ØªØ¯Ø§Ø±ÙƒÙ‡", "Ù…Ø·Ù„Ø¨Ø§Ù‹ Ø£Ø³Ø§Ø³Ø§Ù‹ Ù„Ø¥ÙŠØ¬Ø§Ø¯ Ø§Ù„Ø¨Ø§Ø­Ø«", "Ø®Ø§ØµØ§Ù‹ Ø¨Ø·Ù„Ø§Ø¨ Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ø¹Ù„ÙŠØ§ ÙÙ‚Ø·", "Ù…Ø¶ÙŠØ¹Ø© Ù„Ù„ÙˆÙ‚Øª"], answer: 1 },
            { q: "Ø§Ù„ÙØ·Ù†Ø© ÙˆØ¯Ù‚Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© ØªØ¹Ù†ÙŠ Ø§Ù„ØªÙ†Ø¨Ù‡ Ù„Ù€:", options: ["Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¥Ù…Ù„Ø§Ø¦ÙŠØ© ÙÙ‚Ø·", "ÙƒÙ„ ØµØºÙŠØ±Ø© ÙˆÙƒØ¨ÙŠØ±Ø© Ù„ØªØ±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø­Ø« ÙˆÙ‚ÙˆØªÙ‡", "ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØºÙ„Ø§Ù Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ", "Ø¹Ø¯Ø¯ ØµÙØ­Ø§Øª Ø§Ù„Ø¨Ø­Ø«"], answer: 1 }
        ];

        // Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        function startLesson() {
            const input = document.getElementById('studentNameInput').value.trim();
            const wordCount = input.split(/\s+/).length;
            
            if (wordCount >= 3) {
                studentName = input;
                document.getElementById('display-name').textContent = studentName;
                document.getElementById('welcome-screen').classList.remove('active');
                setTimeout(() => {
                    document.getElementById('welcome-screen').style.display = 'none';
                    document.getElementById('main-app').classList.add('active');
                }, 500);

                startTime = Date.now();
                timerInterval = setInterval(updateTimer, 1000);
                loadQuestion();
            } else {
                document.getElementById('name-error').style.display = 'block';
            }
        }

        function updateTimer() {
            const diff = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(diff / 60).toString().padStart(2, '0');
            const seconds = (diff % 60).toString().padStart(2, '0');
            timeString = `${minutes}:${seconds}`;
            document.getElementById('display-time').textContent = timeString;
        }

        function switchTab(tabId, btnElement) {
            document.querySelectorAll('main > section').forEach(sec => sec.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            
            document.getElementById('tab-' + tabId).classList.add('active');
            btnElement.classList.add('active');
        }

        // ==========================================
        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ (Gemini Integration)
        // ==========================================
        async function fetchGeminiAPI(promptText, retries = 5) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/${aiModel}:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: promptText }] }],
                systemInstruction: { parts: [{ text: systemInstruction }] }
            };

            const delays = [1000, 2000, 4000, 8000, 16000];
            
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    if (!response.ok) throw new Error(`HTTP Error: ${response.status}`);
                    
                    const data = await response.json();
                    return data.candidates[0].content.parts[0].text;
                } catch (error) {
                    if (i === retries - 1) throw error;
                    await new Promise(res => setTimeout(res, delays[i]));
                }
            }
        }

        async function askAI() {
            const inputEl = document.getElementById('ai-input');
            const question = inputEl.value.trim();
            if (!question) return;

            const chatHistory = document.getElementById('chat-history');
            const btnEl = document.getElementById('ai-btn');

            // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø·Ø§Ù„Ø¨
            const userDiv = document.createElement('div');
            userDiv.className = 'chat-msg user-msg';
            userDiv.textContent = question;
            chatHistory.appendChild(userDiv);

            // ØªØµÙÙŠØ± Ø§Ù„Ø­Ù‚Ù„ ÙˆØ¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø²Ø±
            inputEl.value = '';
            inputEl.disabled = true;
            btnEl.disabled = true;

            // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ù†ØªØ¸Ø§Ø±
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'loading-msg';
            loadingDiv.textContent = "âœ¨ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙÙƒÙŠØ± ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¯Ø±Ø³...";
            chatHistory.appendChild(loadingDiv);
            chatHistory.scrollTop = chatHistory.scrollHeight;

            try {
                // Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Gemini API
                const answer = await fetchGeminiAPI(question);
                
                chatHistory.removeChild(loadingDiv);

                // Ø¥Ø¶Ø§ÙØ© Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
                const aiDiv = document.createElement('div');
                aiDiv.className = 'chat-msg ai-msg';
                aiDiv.textContent = answer;
                chatHistory.appendChild(aiDiv);
            } catch (error) {
                chatHistory.removeChild(loadingDiv);
                const errorDiv = document.createElement('div');
                errorDiv.className = 'chat-msg ai-msg';
                errorDiv.style.background = "var(--danger)";
                errorDiv.textContent = "Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ø§Ù‹.";
                chatHistory.appendChild(errorDiv);
            }

            // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ù‚Ù„ ÙˆØ§Ù„Ø²Ø±
            inputEl.disabled = false;
            btnEl.disabled = false;
            inputEl.focus();
            chatHistory.scrollTop = chatHistory.scrollHeight;
        }

        // ==========================================
        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
        // ==========================================
        function loadQuestion() {
            const q = QUESTIONS[currentQuestion];
            document.getElementById('quiz-progress').textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${currentQuestion + 1} Ù…Ù† ${QUESTIONS.length}`;
            document.getElementById('question-text').textContent = q.q;
            
            const optionsArea = document.getElementById('options-area');
            optionsArea.innerHTML = '';
            
            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'quiz-btn';
                btn.textContent = opt;
                btn.onclick = () => handleAnswer(index, btn);
                optionsArea.appendChild(btn);
            });
        }

        function handleAnswer(selectedIndex, btnElement) {
            const buttons = document.getElementById('options-area').querySelectorAll('button');
            buttons.forEach(b => b.disabled = true);

            const correctAnswer = QUESTIONS[currentQuestion].answer;

            if (selectedIndex === correctAnswer) {
                btnElement.classList.add('correct');
                score++;
                document.getElementById('quiz-score').textContent = score;
            } else {
                btnElement.classList.add('wrong');
                buttons[correctAnswer].classList.add('correct');
            }

            setTimeout(() => {
                currentQuestion++;
                if (currentQuestion < QUESTIONS.length) {
                    loadQuestion();
                } else {
                    finishQuiz();
                }
            }, 1500); 
        }

        function finishQuiz() {
            clearInterval(timerInterval);
            
            document.getElementById('quiz-area').style.display = 'none';
            document.getElementById('result-area').classList.add('active');
            document.getElementById('final-score').textContent = score;

            const titleEl = document.getElementById('result-title');
            const iconEl = document.getElementById('result-icon');
            
            if (score >= 18) {
                titleEl.textContent = "Ù…Ù…ØªØ§Ø² Ø¬Ø¯Ø§Ù‹! Ø£Ø¯Ø§Ø¡ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ Ø±Ø§Ù‚Ù.";
                titleEl.className = "result-message excellent";
                iconEl.textContent = "ğŸ†";
            } else if (score >= 14) {
                titleEl.textContent = "Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹! Ø§Ø³ØªÙŠØ¹Ø§Ø¨ Ø¬ÙŠØ¯ Ù„Ù„Ù…Ø§Ø¯Ø©.";
                titleEl.className = "result-message good";
                iconEl.textContent = "ğŸŒŸ";
            } else {
                titleEl.textContent = "ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¯Ø±Ø³ Ø¨ØªØ±ÙƒÙŠØ² Ø£ÙƒØ¨Ø±.";
                titleEl.className = "result-message poor";
                iconEl.textContent = "ğŸ“š";
            }

            sendToGoogleForm();
        }

        function sendToGoogleForm() {
            const percentage = Math.round((score / QUESTIONS.length) * 100) + "%";
            const combinedData = `Ø§Ù„Ù†Ø³Ø¨Ø©: ${percentage} | Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ù…Ø³ØªØºØ±Ù‚: ${timeString} Ø¯Ù‚ÙŠÙ‚Ø©`;

            const form = document.createElement('form');
            form.action = GOOGLE_FORM_URL;
            form.method = "POST";
            form.target = "hidden_iframe"; 

            const dataFields = {};
            dataFields[ENTRY_NAME] = studentName;
            dataFields[ENTRY_RAW_SCORE] = score;
            dataFields[ENTRY_PERCENT_AND_TIME] = combinedData;

            for (let key in dataFields) {
                const input = document.createElement('input');
                input.type = "hidden";
                input.name = key;
                input.value = dataFields[key];
                form.appendChild(input);
            }

            document.body.appendChild(form);
            form.submit(); 
        }
    </script>
</body>
</html>
